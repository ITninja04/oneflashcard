version: "3"

services:
  db:
    build: ../../db/

  core:
    image: node:13
    volumes:
      - ../../core/:/app/
    working_dir: /app/
    command: bash -c "sleep 2 && yarn start:dev"
    depends_on:
      - db

  acceptance:
    image: node:13
    volumes:
      - ./src/:/app/
    working_dir: /app/
    command: bash -c "sleep 4 && yarn test"
    depends_on:
      - db
      - core
